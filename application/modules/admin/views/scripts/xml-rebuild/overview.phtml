<div style="float: left; width: 50%;">
    <h3>XML Dump file generated by the system</h3>
    <table id="dump-file-table">
        <tr <?php echo ((!$this->dumpFileExists) ? 'class="missing"' : '') ?>>
            <th style="width: 100px; font-weight: bold;">Filename</th>
            <th style="width: 80px; font-weight: bold;">Size</th>
            <th style="width: 80px; font-weight: bold;">Lines</th>
            <th style="width: 80px; font-weight: bold;">Date Stamp</th>
            <td style="width: 80px;">&nbsp;</th>
        </tr>

        <tr <?php echo ((!$this->dumpFileExists) ? 'class="missing"' : '') ?>>
            <td>
                <?php echo $this->escape($this->dumpFile) ?>

            </td>
            <td><?php echo (isset($this->dumpSize) ? $this->bytes($this->dumpSize) : '-') ?></td>
            <td><?php echo $this->dumpNumLines ?></td>
            <td><?php echo (isset($this->dumpMtime) ? strftime("%e %b %H:%M", $this->dumpMtime) : '-') ?></td>
            <td>
                <form method="post" action="/admin/location/xml">
                    <button>Regenerate</button>
                </form>
            </td>
        </tr>
    </table>

    <textarea class="xml-content xml-dump" readonly="readonly"><?php echo $this->dumpXmlContent ?></textarea>
    <form method="post" action="/admin/xml-rebuild/download-xml-dump-file">
        <button>Download</button>
    </form>
</div>

<div style="float: left; width: 50%">
    <?php if (!$this->uploadFileExists) : ?>
    <h3>Upload your XML file</h3>
    <?php else : ?>
    <h3>New XML file <?php echo ($this->sameFiles) ? '(APPLIED ALREADY)' : '(Differs)' ?></h3>
    <?php endif ?>
    <table id="upload-file-table">
        <tr <?php echo ((!$this->uploadFileExists) ? 'class="missing"' : '') ?>>
            <th style="width: 100px; font-weight: bold;">Filename</th>
            <th style="width: 80px; font-weight: bold;">Size</th>
            <th style="width: 80px; font-weight: bold;">Lines</th>
            <th style="width: 80px; font-weight: bold;">Date Stamp</th>
            <td style="width: 80px;">&nbsp;</th>
        </tr>

        <tr <?php echo ((!$this->uploadFileExists) ? 'class="missing"' : '') ?>>
            <td>
                <?php echo $this->escape($this->uploadFile) ?>

            </td>
            <td><?php echo (isset($this->uploadSize) ? $this->bytes($this->uploadSize) : '-') ?></td>
            <td><?php echo $this->uploadNumLines ?></td>
            <td><?php echo (isset($this->uploadMtime) ? strftime("%e %b %H:%M", $this->uploadMtime) : '-') ?></td>
            <td>
                <a href="/admin/xml-upload/file-upload"><button>Upload XML</button></a>
            </td>
        </tr>
    </table>

    <textarea class="xml-content xml-upload" readonly="readonly"><?php echo $this->uploadXmlContent ?></textarea>

    <form style="display: inline-block;" method="post" action="/admin/xml-rebuild/download-xml-upload-file">
        <button>Download</button>
    </form>

    <form style="display: inline-block; padding-left: 40px;" method="post" action="/admin/xml-rebuild/parse-xml-upload">
        <button>Verify</button>
    </form>

    <form style="display: inline-block; padding-left: 40px;" method="post" action="/admin/xml-rebuild/dry-run-xml-upload">
        <button>Dry Run</button>
    </form>

    <form style="display: inline-block; padding-left: 40px;" method="post" action="/admin/xml-rebuild/db-rebuild">
        <p>Caution - Make sure you understand this before attempting</p>
        <button style="background-color: red; color: yellow">REBUILD DATABASE</button>
    </div>
</div>
